(()=>{"use strict";const e=(e,t=null)=>{let o;const n=document.querySelector(e);t&&(o=new Validator(Object.assign({selector:e},t)),o.init());const r=document.createElement("div");r.style.cssText="font-size: 2rem; "+("#form3"===e?"color: #ffffff;":"");const a=(e=null,t=3e3)=>{setTimeout((()=>{r.textContent="",e&&"form3"===e.id&&document.querySelector(".popup .popup-close").dispatchEvent(new Event("click",{bubbles:!0}))}),t)};n.addEventListener("submit",(e=>{if(e.preventDefault(),o&&o.error.size)return;const t=new FormData(n),c={};t.forEach(((e,t)=>c[t]=e)),n.append(r),r.innerHTML=(()=>{let e='<div class="sk-circle-bounce">';return[...Array(12)].forEach(((t,o)=>e+=`<div class="sk-child sk-circle-${o+1}"></div>`)),e+="</div>",e})(),(e=>fetch("./server.php",{method:"POST",headerd:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(c).then((e=>{if(200!==e.status)throw new Error("Status network is not 200");n.reset(),r.textContent="Спасибо! Мы скоро с вами свяжемся!",a(n)})).catch((e=>{r.textContent="Что то пошло не так...",a(),console.error(e)}))}))};(e=>{const t=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),n=document.querySelector("#timer-seconds"),r=setInterval(c,1e3);function a(e){return(e<10?"0":"")+e}function c(){const e=function(){const e=new Date("22 feb 2021 10:50").getTime(),t=(new Date).getTime(),o=e-t>=0?(e-t)/1e3:0;return{seconds:Math.floor(o%60),minutes:Math.floor(o/60)%60,hours:Math.floor(o/60/60)%24,timeRemainig:o}}();t.textContent=a(e.hours),o.textContent=a(e.minutes),n.textContent=a(e.seconds),0===e.timeRemainig&&clearInterval(r)}c()})(),(()=>{const e=document.querySelector("menu"),t=()=>{e.classList.toggle("active-menu")},o=function(e){const t=(e="A"===e.tagName?e:e.querySelector("a")).getAttribute("href")||!1,o=!!t&&document.querySelector(t);if(o){this.preventDefault();const e={from:document.documentElement.scrollTop,to:o.getBoundingClientRect().top-document.body.getBoundingClientRect().top};animate({element:e,duration:1e3,timing:makeEaseInOut(circ),draw:scrollTo})}};document.addEventListener("click",(n=>{const r=n.target;r.closest("menu")?r.closest("a")&&t():e.classList.contains("active-menu")&&t(),r.closest(".menu")&&t(),r.closest("a")&&r.closest("a").getAttribute("href").length>1&&"#"===r.closest("a").getAttribute("href")[0]&&o.bind(n)(r.closest("a"))}))})(),function(){const e=document.querySelector(".popup"),t=document.querySelectorAll(".popup-btn"),o=()=>window.innerWidth<768,n=()=>{o()?(e.style.display="block",e.style.opacity=""):animate({element:e,duration:1e3,timing:circ,draw:popupActions})};t.forEach((e=>{e.addEventListener("click",n)})),e.addEventListener("click",(t=>{let n=t.target;n.classList.contains("popup-close")&&(n=null),n=n?n.closest(".popup-content"):null,n||(o()?(e.style.display="none",e.style.opacity=""):animate({element:e,duration:1e3,timing:makeEaseOut(circ),draw:popupActions}))}))}(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let n=e.target;n=n.closest(".service-header-tab"),n&&t.forEach(((e,r)=>{var a;e===n&&(a=r,o.forEach(((e,o)=>{o===a?(t[o].classList.add("active"),e.classList.remove("d-none")):(e.classList.add("d-none"),t[o].classList.remove("active"))})))}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-dots"),o=document.querySelector(".portfolio-content"),n=[...Array(e.length)].map((()=>{const e=document.createElement("li");return e.classList.add("dot"),e}));let r,a=0;const c=(e,t,o)=>{e[t].classList.remove(o)},s=(e,t,o)=>{e[t].classList.add(o)};t.append(...n),s(n,a,"dot-active");const l=()=>{c(e,a,"portfolio-item-active"),c(n,a,"dot-active"),a++,a>=e.length&&(a=0),s(e,a,"portfolio-item-active"),s(n,a,"dot-active")},i=(e=3e3)=>{r=setInterval(l,e)};o.addEventListener("click",(t=>{t.preventDefault();const o=t.target;o.matches(".portfolio-btn, .dot")&&(c(e,a,"portfolio-item-active"),c(n,a,"dot-active"),o.matches("#arrow-right")?a++:o.matches("#arrow-left")?a--:o.matches(".dot")&&n.forEach(((e,t)=>{e===o&&(a=t)})),a>=e.length?a=0:a<0&&(a=e.length-1),s(e,a,"portfolio-item-active"),s(n,a,"dot-active"))})),o.addEventListener("mouseover",(e=>{e.target.matches(".portfolio-btn, .dot")&&clearInterval(r)})),o.addEventListener("mouseout",(e=>{e.target.matches(".portfolio-btn, .dot")&&i(1500)})),i(1500)})(),document.querySelectorAll("[data-img]").forEach((e=>{e.dataset.src=e.src,e.addEventListener("mouseenter",(e=>e.target.src=e.target.dataset.img)),e.addEventListener("mouseleave",(e=>e.target.src=e.target.dataset.src))})),(()=>{const e=document.querySelectorAll(".calc-square, .calc-count, .calc-day"),t=document.querySelectorAll('[name="user_name"]'),o=document.querySelectorAll('[name="user_message"'),n=document.querySelectorAll('[name="user_email"'),r=document.querySelectorAll('[name="user_phone"]'),a=(e,t)=>{e instanceof HTMLInputElement&&(e=[e]),e.forEach((e=>{e.addEventListener("input",(()=>e.value=e.value.replace(t,""))),e.addEventListener("blur",(()=>{e.value=e.value.replace(/^[ -]*|( |-)(?=\1)|[ -]*$/g,""),"user_name"===e.name&&(e.value=e.value.replace(/(( |^)[а-яё])(?=[а-яё])/g,(e=>e.toUpperCase())))})),"email"===e.type&&e.addEventListener("keypress",(e=>{"Space"===e.code&&e.preventDefault()}))}))};a(e,/\D/g),a(t,/[^А-Яа-яЁё ]/g),a(o,/[^А-Яа-яЁё\d .,;:?!-]/g),a(n,/[^a-z@~!\.\*\'-]/gi),a(r,/[^\d\+]/g)})(),((e=100)=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),n=document.querySelector(".calc-square"),r=document.querySelector(".calc-count"),a=document.querySelector(".calc-day"),c=document.getElementById("total");t.addEventListener("change",(t=>{t.target.matches("select, input")&&(()=>{let t=0,s=1,l=1;const i=+o.options[o.selectedIndex].value,u=+n.value;r.value>1&&(s+=(r.value-1)/10),a.value<5?l*=2:a.value&&a.value<10&&(l*=1.5),i&&u&&(t=e*i*u*s*l),((e,t=2e3)=>{const o=+c.textContent,n=e-o,r=Date.now(),a=Math.round(1e4/e),s=setInterval((()=>{const a=Math.round(o+n*(Date.now()-r)/t);n>0&&a<=e||n<0&&a>=e?c.textContent=a:(c.textContent=e,clearInterval(s))}),a)})(t,1e3)})()}))})(100),e("#form1",{pattern:{phone:/^\+?\d{11,}$/,userName:/^[А-Яа-яЁё ]{2,}$/},method:{"form1-name":[["notEmpty"],["pattern","userName"]],"form1-phone":[["notEmpty"],["pattern","phone"]],"form1-email":[["notEmpty"],["pattern","email"]]}}),e("#form2",{pattern:{phone:/^\+?\d{11,}$/,userName:/^[А-Яа-яЁё ]{2,}$/},method:{"form2-name":[["notEmpty"],["pattern","userName"]],"form2-phone":[["notEmpty"],["pattern","phone"]],"form2-email":[["notEmpty"],["pattern","email"]],"form2-message":[["notEmpty"],["pattern","userName"]]}}),e("#form3",{pattern:{phone:/^\+?\d{11,}$/,userName:/^[А-Яа-яЁё ]{2,}$/},method:{"form3-name":[["notEmpty"],["pattern","userName"]],"form3-phone":[["notEmpty"],["pattern","phone"]],"form3-email":[["notEmpty"],["pattern","email"]]}})})();